{"version":3,"sources":["main.js","components/test.js"],"names":["state","user","list","httpGetAsync","theUrl","callback","httpRequest","XMLHttpRequest","onreadystatechange","readyState","status","data","responseText","open","send","httpPostAsync","payload","setRequestHeader","JSON","stringify","kendall_user","kendall_playlist","sam_user","getUserPlaylists","updateUserPlaylistsView","items","parse","i","length","playlist","oddEvenModifier","push","id","name","updateMainView","join","updateInitialView","updatePlaylistSongsView","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","song","value","hasDescription","messinaId","description","err","return","setPlaylistSongs","document","getElementById","saveConfirmation","querySelector","classList","add","setTimeout","remove","content","querySelectorAll","innerHTML","toggleDescription","event","songId","target","closest","songEl","contains","playSong","style","opacity","onclick","pauseSong","findGetParameter","parameterName","result","tmp","location","search","substr","split","forEach","item","decodeURIComponent","window","pathname","console","log"],"mappings":"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","file":"main.min.js","sourcesContent":["let state = {\n  user: '',\n  list: ''\n}\n\n\nfunction httpGetAsync(theUrl, callback) { //theURL or a path to file\n  var httpRequest = new XMLHttpRequest();\n  httpRequest.onreadystatechange = function() {\n    if (httpRequest.readyState == 4 && httpRequest.status == 200) {\n      var data = httpRequest.responseText; //if you fetch a file you can JSON.parse(httpRequest.responseText)\n      if (callback) {\n        callback(data);\n      }\n    }\n  };\n\n  httpRequest.open('GET', theUrl, true);\n  httpRequest.send(null);\n}\n\n\nfunction httpPostAsync(theUrl, payload, callback) { //theURL or a path to file\n  var httpRequest = new XMLHttpRequest();\n  httpRequest.onreadystatechange = function() {\n    if (httpRequest.readyState == 4 && httpRequest.status == 200) {\n      var data = httpRequest.responseText; //if you fetch a file you can JSON.parse(httpRequest.responseText)\n      if (callback) {\n        callback(data);\n      }\n    }\n  };\n\n  httpRequest.open('POST', theUrl, true);\n  httpRequest.setRequestHeader('Content-Type', 'application/json');\n  httpRequest.send(JSON.stringify({\n    payload: payload\n  }));\n}\n\nconst kendall_user = 'kwatch90210';\nconst kendall_playlist = '2nrEA3uA0oD23f5KuRUu7u';\n\nconst sam_user = 'smessina';\n\n\nlet getUserPlaylists = (user) => {\n  switch (user) {\n    case 'sam':\n      user = sam_user;\n      break;\n    case 'kendall':\n      user = kendall_user;\n      break;\n    default:\n      break\n  }\n  state.user = user;\n  updateUserPlaylistsView();\n}\n\nlet updateUserPlaylistsView = () => {\n  httpGetAsync(`/playlists?user=${state.user}`, function(data) {\n    if (data === 'try again') {\n      updateUserPlaylistsView();\n    }\n    let items = [];\n    data = JSON.parse(data).items;\n\n    for (let i = 0; i < data.length; i++) {\n      let playlist = data[i];\n      let oddEvenModifier = (i % 2 === 0) ? 'odd' : 'even';\n      items.push(`<p class=\"playlist playlist--${oddEvenModifier}\">\n                    <span class=\"playlist__pointer playlist__pointer--${oddEvenModifier}\"></span>\n                    <a class=\"playlist__link playlist__link--${oddEvenModifier}\" href=\"/songs?user=${state.user}&list=${playlist.id}\" >\n                      <span>\n                        ${playlist.name}\n                      </span>\n                    </a>\n                  </p>\n                `);\n    }\n    updateMainView(items.join(''));\n  });\n}\n\nlet updateInitialView = () => {\n  updateMainView(`\n      <div class=\"btn-container\">\n        <a class=\"btn\"  href=\"/lists?user=smessina\" >\n          Sam\n        </a>\n          <br />\n          <a class=\"btn\" href=\"/lists?user=kwatch90210\" >\n            Kendall\n          </a>\n      </div>\n    <div class=\"bands\">\n      <p></p>\n      <p></p>\n      <p></p>\n    </div>\n  `);\n}\n\nlet updatePlaylistSongsView = () => {\n  httpGetAsync(`/playlist?user=${state.user}&list=${state.list}`, function(data) {\n    let items = [];\n    data = JSON.parse(data);\n    for (let song of data['items']) {\n      let hasDescription = '';\n      let newData = {\n        // the special id for playlist+song combination. \n        // this is the key in the db for the song. the value is the description\n        \"messinaID\": song.messinaId,\n        \"description\": song.description\n      }\n      if (song.description.length > 0) {\n        hasDescription = 'has-description';\n      }\n      items.push(`\n      <div class=\"song-item song-item--${song.id} ${hasDescription}\">\n        <p onclick=\"toggleDescription(event, '${song.id}')\" class=\"song-item__name song-item__name--${song.id} clickable\">\n          <span>\n            ${song.name}\n          </span>\n          <span id=\"play-icon--${song.id}\" class=\"song-item__name__play\" onclick=\"playSong('${song.id}')\">\n            <svg id=\"play-icon-${song.id}\" class=\"feather feather-play sc-dnqmqq jxshSx\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\" data-reactid=\"916\"><polygon points=\"5 3 19 12 5 21 5 3\"></polygon></svg>\n          </span>\n        </p>\n        <div class=\"song-item__description song-item__description--${song.id}\">\n          <textarea type=\"text\" \n                    placeholder=\"Description\" \n                    name=\"song-${song.messinaId}\" \n                    id=\"song-${song.messinaId}\">${song.description}</textarea>\n          <div class=\"song-item__description__btn-container\">\n            <button id=\"save-btn-${song.messinaId}\" class=\"save-btn clickable\" onclick=\"setPlaylistSongs('${song.messinaId}')\">Save</button>\n            <button id=\"cancel-btn-${song.messinaId}\" class=\"cancel-btn clickable\" onclick=\"toggleDescription(event, '${song.id}')\">Cancel</button>\n          </div>\n        </div>\n      </div>\n      `);\n    }\n    items.push('<div id=\"embed-player\"></div>');\n    updateMainView(items.join(''));\n  });\n}\n\nlet setPlaylistSongs = (id) => {\n  let saveBtn = document.getElementById(`save-btn-${id}`);\n  let cancelBtn = document.getElementById(`cancel-btn-${id}`);\n  let newDescription = document.getElementById(`song-${id}`).value;\n  let payload = [{\n    'id': id,\n    'description': newDescription\n  }];\n\n  httpPostAsync('/playlist', payload, (data) => {\n    let saveConfirmation = document.querySelector('.save-confirmation');\n    saveConfirmation.classList.add('save-confirmation--on');\n\n    setTimeout(() => {\n      saveConfirmation.classList.remove('save-confirmation--on');\n    }, 3000);\n  });\n}\n\nlet updateMainView = (content) => {\n  let mainSection = document.querySelectorAll('main#main')[0];\n  mainSection.innerHTML = content;\n}\n\nlet toggleDescription = (event, songId) => {\n  if (event.target.closest('.song-item__name__play')) return;\n  let songEl = document.querySelectorAll(`.song-item--${songId}`)[0];\n  if (songEl.classList.contains('song-item--shown')) {\n    songEl.classList.add('song-item--hidden');\n    songEl.classList.remove('song-item--shown');\n  } else {\n    songEl.classList.add('song-item--shown');\n    songEl.classList.remove('song-item--hidden');\n  }\n}\n\nlet playSong = (songId) => {\n  document.querySelectorAll(`#embed-player`)[0].innerHTML = `<iframe src=\"https://open.spotify.com/embed/track/${songId}\" width=\"100%\" height=\"80\" frameborder=\"0\" allowtransparency=\"true\" allow=\"encrypted-media\"></iframe>`;\n  document.querySelectorAll(`#play-icon--${songId}`)[0].style.opacity = 0;\n  document.querySelectorAll(`#play-icon--${songId}`)[0].onclick = () => pauseSong(songId);\n  document.querySelectorAll(`#play-icon--${songId}`)[0].classList.add('play-icon--playing');\n  setTimeout(() => {\n    document.querySelectorAll(`#play-icon--${songId}`)[0].innerHTML = `\n<svg id=\"pause-icon-${songId}\" class=\"feather feather-x sc-dnqmqq jxshSx\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\" data-reactid=\"1336\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line></svg>\n  `;\n    document.querySelectorAll(`#play-icon--${songId}`)[0].onclick = () => pauseSong(songId);\n    document.querySelectorAll(`#play-icon--${songId}`)[0].style.opacity = 1;\n  }, 500);\n}\n\nlet pauseSong = (songId) => {\n  document.querySelectorAll(`#embed-player`)[0].innerHTML = ``;\n  document.querySelectorAll(`#play-icon--${songId}`)[0].style.opacity = 0;\n  document.querySelectorAll(`#play-icon--${songId}`)[0].classList.remove('play-icon--playing');\n  setTimeout(() => {\n    document.querySelectorAll(`#play-icon--${songId}`)[0].innerHTML = `\n            <svg id=\"play-icon-${songId}\" class=\"feather feather-play sc-dnqmqq jxshSx\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\" data-reactid=\"916\"><polygon points=\"5 3 19 12 5 21 5 3\"></polygon></svg>\n  `;\n    document.querySelectorAll(`#play-icon--${songId}`)[0].onclick = () => playSong(songId);\n    document.querySelectorAll(`#play-icon--${songId}`)[0].style.opacity = 1;\n  }, 500);\n}\n\nfunction findGetParameter(parameterName) {\n  var result = null,\n    tmp = [];\n  location.search\n    .substr(1)\n    .split(\"&\")\n    .forEach(function(item) {\n      tmp = item.split(\"=\");\n      if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);\n    });\n  return result;\n}\n\n(() => {\n  switch (window.location.pathname) {\n    case '/':\n      document.querySelectorAll('body')[0].id = 'home';\n      updateInitialView();\n      break;\n    case '/lists':\n      document.querySelectorAll('body')[0].id = 'lists';\n      state.user = findGetParameter('user');\n      updateUserPlaylistsView();\n      break;\n    case '/songs':\n      document.querySelectorAll('body')[0].id = 'songs';\n      state.user = findGetParameter('user');\n      state.list = findGetParameter('list');\n      updatePlaylistSongsView();\n      break;\n    default:\n      break;\n  }\n\n})()\n","console.log(\"asfd\");\n"]}
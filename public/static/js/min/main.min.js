"use strict";var state={user:"",list:""};function httpGetAsync(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=n.responseText;t&&t(e)}},n.open("GET",e,!0),n.send(null)}function httpPostAsync(e,t,n){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var e=s.responseText;n&&n(e)}},s.open("POST",e,!0),s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify({payload:t}))}var kendall_user="kwatch90210",kendall_playlist="2nrEA3uA0oD23f5KuRUu7u",sam_user="smessina",getUserPlaylists=function(e){switch(e){case"sam":e=sam_user;break;case"kendall":e=kendall_user}state.user=e,updateUserPlaylistsView()},updateUserPlaylistsView=function(){httpGetAsync("/playlists?user="+state.user,function(e){var t=[];e=JSON.parse(e).items;var n=!0,s=!1,a=void 0;try{for(var i,r=e[Symbol.iterator]();!(n=(i=r.next()).done);n=!0){var l=i.value;t.push('<p><a href="/songs?user='+state.user+"&list="+l.id+'" >'+l.name+"</a></p>")}}catch(e){s=!0,a=e}finally{try{n||null==r.return||r.return()}finally{if(s)throw a}}updateMainView(t.join(""))})},updateInitialView=function(){updateMainView('\n      <a href="/lists?user='+sam_user+'" >\n       <button>Sam</button>\n     </a>\n     <br />\n      <a href="/lists?user='+kendall_user+'" >\n       <button>Kendall</button>\n     </a>\n  ')},updatePlaylistSongsView=function(){httpGetAsync("/playlist?user="+state.user+"&list="+state.list,function(e){var t=[];e=JSON.parse(e);var n=!0,s=!1,a=void 0;try{for(var i,r=e.items[Symbol.iterator]();!(n=(i=r.next()).done);n=!0){var l=i.value;l.messinaId,l.description;t.push('\n    <div>\n      <p class="clickable" onclick="playSong(\''+l.id+"')\">"+l.name+'</p>\n    <div>\n    <div id="embed-'+l.id+'"></div>\n                <label for="song-'+l.messinaId+'">description</label>\n                <input type="text" value="'+l.description+'" name="song-'+l.messinaId+'" id="song-'+l.messinaId+'"/>\n                <button onclick="setPlaylistSongs(\''+l.messinaId+"', document.getElementById('song-"+l.messinaId+"').value)\">Submit yo' shit</button>\n    </div>\n    </div>\n      ")}}catch(e){s=!0,a=e}finally{try{n||null==r.return||r.return()}finally{if(s)throw a}}updateMainView(t.join(""))})},setPlaylistSongs=function(e,t){httpPostAsync("/playlist",[{id:e,description:t}],function(e){})},updateMainView=function(e){document.querySelectorAll("main#main")[0].innerHTML=e},playSong=function(e){var t='<iframe src="https://open.spotify.com/embed/track/'+e+'" width="300" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>';document.querySelectorAll("#embed-"+e)[0].innerHTML=t};function findGetParameter(t){var n=null,s=[];return location.search.substr(1).split("&").forEach(function(e){(s=e.split("="))[0]===t&&(n=decodeURIComponent(s[1]))}),n}!function(){switch(window.location.pathname){case"/":document.querySelectorAll("body")[0].id="home";break;case"/lists":document.querySelectorAll("body")[0].id="lists",state.user=findGetParameter("user"),updateUserPlaylistsView();break;case"/songs":document.querySelectorAll("body")[0].id="songs",state.user=findGetParameter("user"),state.list=findGetParameter("list"),updatePlaylistSongsView()}}(),console.log("asfd");
//# sourceMappingURL=main.min.js.map

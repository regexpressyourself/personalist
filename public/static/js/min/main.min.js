"use strict";var state={user:"",list:""};function httpGetAsync(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=n.responseText;t&&t(e)}},n.open("GET",e,!0),n.send(null)}function httpPostAsync(e,t,n){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var e=s.responseText;n&&n(e)}},s.open("POST",e,!0),s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify({payload:t}))}var kendall_user="kwatch90210",kendall_playlist="2nrEA3uA0oD23f5KuRUu7u",sam_user="smessina",getUserPlaylists=function(e){switch(e){case"sam":e=sam_user;break;case"kendall":e=kendall_user}state.user=e,updateUserPlaylistsView()},updateUserPlaylistsView=function(){httpGetAsync("/playlists?user="+state.user,function(e){var t=[];e=JSON.parse(e).items;for(var n=0;n<e.length;n++){var s=e[n],i=n%2==0?"odd":"even";t.push('<p class="playlist playlist--'+i+'">\n                    <span class="playlist__pointer playlist__pointer--'+i+'"></span>\n                    <a class="playlist__link playlist__link--'+i+'" href="/songs?user='+state.user+"&list="+s.id+'" >\n                      <span>\n                        '+s.name+"\n                      </span>\n                    </a>\n                  </p>\n                ")}updateMainView(t.join(""))})},updateInitialView=function(){updateMainView('\n      <div class="btn-container">\n        <a class="btn"  href="/lists?user=smessina" >\n          Sam\n        </a>\n          <br />\n          <a class="btn" href="/lists?user=kwatch90210" >\n            Kendall\n          </a>\n      </div>\n    <div class="bands">\n      <p></p>\n      <p></p>\n      <p></p>\n    </div>\n  ')},updatePlaylistSongsView=function(){httpGetAsync("/playlist?user="+state.user+"&list="+state.list,function(e){var t=[];e=JSON.parse(e);var n=!0,s=!1,i=void 0;try{for(var a,o=e.items[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value;l.messinaId,l.description;t.push('\n      <div class="song-item song-item--'+l.id+'">\n        <p onclick="toggleDescription(event, \''+l.id+'\')" class="song-item__name song-item__name--'+l.id+' clickable">\n          <span>\n            '+l.name+'\n          </span>\n          <span id="play-icon--'+l.id+'" class="song-item__name__play" onclick="playSong(\''+l.id+'\')">\n            <svg id="play-icon-'+l.id+'" class="feather feather-play sc-dnqmqq jxshSx" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" data-reactid="916"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>\n          </span>\n        </p>\n        <div class="song-item__description song-item__description--'+l.id+'">\n          <textarea type="text" \n                    placeholder="Description" \n                    name="song-'+l.messinaId+'" \n                    id="song-'+l.messinaId+'">'+l.description+'</textarea>\n          <div class="song-item__description__btn-container">\n            <button class="clickable" onclick="setPlaylistSongs(\''+l.messinaId+'\')">Save</button>\n            <button class="clickable" onclick="toggleDescription(event, \''+l.id+"')\">Cancel</button>\n          </div>\n        </div>\n      </div>\n      ")}}catch(e){s=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(s)throw i}}t.push('<div id="embed-player"></div>'),updateMainView(t.join(""))})},setPlaylistSongs=function(e){httpPostAsync("/playlist",[{id:e,description:document.getElementById("song-"+e).value}],function(e){})},updateMainView=function(e){document.querySelectorAll("main#main")[0].innerHTML=e},toggleDescription=function(e,t){if(!e.target.closest(".song-item__name__play")){var n=document.querySelectorAll(".song-item--"+t)[0];n.classList.contains("song-item--shown")?(n.classList.add("song-item--hidden"),n.classList.remove("song-item--shown")):(n.classList.add("song-item--shown"),n.classList.remove("song-item--hidden"))}},playSong=function(e){document.querySelectorAll("#embed-player")[0].innerHTML='<iframe src="https://open.spotify.com/embed/track/'+e+'" width="100%" height="80" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>',document.querySelectorAll("#play-icon--"+e)[0].style.opacity=0,setTimeout(function(){document.querySelectorAll("#play-icon--"+e)[0].innerHTML='\n            <svg id="pause-icon-'+e+'" class="feather feather-pause sc-dnqmqq jxshSx" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" data-reactid="861"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>\n  ',document.querySelectorAll("#play-icon--"+e)[0].onclick=function(){return pauseSong(e)},document.querySelectorAll("#play-icon--"+e)[0].style.opacity=1},500)},pauseSong=function(e){player.pause(),document.querySelectorAll("#play-icon--"+e)[0].style.opacity=0,setTimeout(function(){document.querySelectorAll("#play-icon--"+e)[0].innerHTML='\n            <svg id="play-icon-'+e+'" class="feather feather-play sc-dnqmqq jxshSx" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" data-reactid="916"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>\n  ',document.querySelectorAll("#play-icon--"+e)[0].onclick=function(){return playSong(e)},document.querySelectorAll("#play-icon--"+e)[0].style.opacity=1},500)};function findGetParameter(t){var n=null,s=[];return location.search.substr(1).split("&").forEach(function(e){(s=e.split("="))[0]===t&&(n=decodeURIComponent(s[1]))}),n}!function(){switch(window.location.pathname){case"/":document.querySelectorAll("body")[0].id="home",updateInitialView();break;case"/lists":document.querySelectorAll("body")[0].id="lists",state.user=findGetParameter("user"),updateUserPlaylistsView();break;case"/songs":document.querySelectorAll("body")[0].id="songs",state.user=findGetParameter("user"),state.list=findGetParameter("list"),updatePlaylistSongsView()}}(),console.log("asfd");
//# sourceMappingURL=main.min.js.map

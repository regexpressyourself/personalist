"use strict";var state={user:"",list:""};function httpGetAsync(e,n){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var e=t.responseText;n&&n(e)}},t.open("GET",e,!0),t.send(null)}function httpPostAsync(e,n,t){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var e=s.responseText;t&&t(e)}},s.open("POST",e,!0),s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify({payload:n}))}var kendall_user="kwatch90210",kendall_playlist="2nrEA3uA0oD23f5KuRUu7u",sam_user="smessina",getUserPlaylists=function(e){switch(e){case"sam":e=sam_user;break;case"kendall":e=kendall_user}state.user=e,updateUserPlaylistsView()},updateUserPlaylistsView=function(){httpGetAsync("/playlists?user="+state.user,function(e){var n=[];e=JSON.parse(e).items;for(var t=0;t<e.length;t++){var s=e[t],i=t%2==0?"odd":"even";n.push('<p class="playlist playlist--'+i+'">\n                    <span class="playlist__pointer playlist__pointer--'+i+'"></span>\n                    <a class="playlist__link playlist__link--'+i+'" href="/songs?user='+state.user+"&list="+s.id+'" >\n                      <span>\n                        '+s.name+"\n                      </span>\n                    </a>\n                  </p>\n                ")}updateMainView(n.join(""))})},updateInitialView=function(){updateMainView('\n      <div class="btn-container">\n        <a class="btn"  href="/lists?user=smessina" >\n          Sam\n        </a>\n          <br />\n          <a class="btn" href="/lists?user=kwatch90210" >\n            Kendall\n          </a>\n      </div>\n    <div class="bands">\n      <p></p>\n      <p></p>\n      <p></p>\n    </div>\n  ')},updatePlaylistSongsView=function(){httpGetAsync("/playlist?user="+state.user+"&list="+state.list,function(e){var n=[];e=JSON.parse(e);var t=!0,s=!1,i=void 0;try{for(var a,l=e.items[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var o=a.value;o.messinaId,o.description;n.push('\n      <div class="song-item song-item--'+o.id+'">\n        <p onclick="toggleDescription(event, \''+o.id+'\')" class="song-item__name song-item__name--'+o.id+' clickable">\n          <span>\n            '+o.name+'\n          </span>\n          <span id="play-icon--'+o.id+'" class="song-item__name__play" onclick="playSong(\''+o.id+'\')">\n            <svg id="play-icon-'+o.id+'" class="feather feather-play sc-dnqmqq jxshSx" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" data-reactid="916"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>\n          </span>\n        </p>\n        <div class="song-item__description song-item__description--'+o.id+'">\n          <textarea type="text" \n                    placeholder="Description" \n                    name="song-'+o.messinaId+'" \n                    id="song-'+o.messinaId+'">'+o.description+'</textarea>\n          <div class="song-item__description__btn-container">\n            <button class="clickable" onclick="setPlaylistSongs(\''+o.messinaId+'\')">Save</button>\n            <button class="clickable" onclick="toggleDescription(event, \''+o.id+"')\">Cancel</button>\n          </div>\n        </div>\n      </div>\n      ")}}catch(e){s=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(s)throw i}}n.push('<div id="embed-player"></div>'),updateMainView(n.join(""))})},setPlaylistSongs=function(e){httpPostAsync("/playlist",[{id:e,description:document.getElementById("song-"+e).value}],function(e){})},updateMainView=function(e){document.querySelectorAll("main#main")[0].innerHTML=e},toggleDescription=function(e,n){if(!e.target.closest(".song-item__name__play")){var t=document.querySelectorAll(".song-item--"+n)[0];t.classList.contains("song-item--shown")?(t.classList.add("song-item--hidden"),t.classList.remove("song-item--shown")):(t.classList.add("song-item--shown"),t.classList.remove("song-item--hidden"))}},playSong=function(e){document.querySelectorAll("#embed-player")[0].innerHTML='<iframe src="https://open.spotify.com/embed/track/'+e+'" width="100%" height="80" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>',document.querySelectorAll("#play-icon--"+e)[0].style.opacity=0,document.querySelectorAll("#play-icon--"+e)[0].onclick=function(){return pauseSong(e)},document.querySelectorAll("#play-icon--"+e)[0].classList.add("play-icon--playing"),setTimeout(function(){document.querySelectorAll("#play-icon--"+e)[0].innerHTML='\n<svg id="pause-icon-'+e+'" class="feather feather-x sc-dnqmqq jxshSx" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" data-reactid="1336"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>\n  ',document.querySelectorAll("#play-icon--"+e)[0].onclick=function(){return pauseSong(e)},document.querySelectorAll("#play-icon--"+e)[0].style.opacity=1},500)},pauseSong=function(e){document.querySelectorAll("#embed-player")[0].innerHTML="",document.querySelectorAll("#play-icon--"+e)[0].style.opacity=0,document.querySelectorAll("#play-icon--"+e)[0].classList.remove("play-icon--playing"),setTimeout(function(){document.querySelectorAll("#play-icon--"+e)[0].innerHTML='\n            <svg id="play-icon-'+e+'" class="feather feather-play sc-dnqmqq jxshSx" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" data-reactid="916"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>\n  ',document.querySelectorAll("#play-icon--"+e)[0].onclick=function(){return playSong(e)},document.querySelectorAll("#play-icon--"+e)[0].style.opacity=1},500)};function findGetParameter(n){var t=null,s=[];return location.search.substr(1).split("&").forEach(function(e){(s=e.split("="))[0]===n&&(t=decodeURIComponent(s[1]))}),t}!function(){switch(window.location.pathname){case"/":document.querySelectorAll("body")[0].id="home",updateInitialView();break;case"/lists":document.querySelectorAll("body")[0].id="lists",state.user=findGetParameter("user"),updateUserPlaylistsView();break;case"/songs":document.querySelectorAll("body")[0].id="songs",state.user=findGetParameter("user"),state.list=findGetParameter("list"),updatePlaylistSongsView()}}(),console.log("asfd");
//# sourceMappingURL=main.min.js.map

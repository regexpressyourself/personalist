(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/personalist-orange.6716f3ec.png"},19:function(e,t,a){e.exports=a.p+"static/media/personalist-white.91d10d56.png"},21:function(e,t,a){e.exports=a(50)},27:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),c=a.n(l),s=(a(27),a(52)),o=a(53),i=a(2),m=a(54),u=a(19),d=a.n(u),p=a(10),h=a.n(p);var f=function(e){return"/"===window.location.pathname?r.a.createElement("header",null,r.a.createElement("a",{className:"header-img-container header-img-container--home",title:"Personalist Home",href:"/"},r.a.createElement("img",{className:"header-img header-img--home",src:d.a,alt:"PersonaList"}))):e.playlistName&&e.username?(document.title="".concat(e.playlistName," by ").concat(e.username," | personaList"),r.a.createElement("header",null,r.a.createElement("a",{className:"header-img-container",title:"Personalist Home",href:"/"},r.a.createElement("img",{className:"header-img",src:h.a,alt:"PersonaList"})),r.a.createElement("h1",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"header-h1 has-subhead",title:"".concat(e.username,"'s ").concat(e.playlistName," playlist"),href:"https://open.spotify.com/playlist/".concat(e.playlistId)},e.playlistName),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"subheader",title:"".concat(e.username,"'s profile"),href:"https://open.spotify.com/user/".concat(e.username)},"by ",e.username)))):e.username?(document.title="".concat(e.username,"'s playlists | personaList"),r.a.createElement("header",null,r.a.createElement("a",{className:"header-img-container",title:"Personalist Home",href:"/"},r.a.createElement("img",{className:"header-img",src:h.a,alt:"PersonaList"})),r.a.createElement("h1",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"header-h1",title:"".concat(e.username,"'s profile"),href:"https://open.spotify.com/user/".concat(e.username)},e.username)))):r.a.createElement("header",null,r.a.createElement("a",{className:"header-img-container",title:"Personalist Home",href:"/"},r.a.createElement("img",{className:"header-img",src:h.a,alt:"PersonaList"})))},E=a(7),b=a.n(E);var g=function(){var e=Object(n.useState)(localStorage.getItem("username")||""),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),s=Object(i.a)(c,2),o=s[0],u=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),h=p[0],E=p[1],g=Object(n.useState)("none"),y=Object(i.a)(g,2),v=y[0],O=y[1],j=function(e){!0!==e&&"Enter"!==e.key||E(!0)};return Object(n.useEffect)(function(){return window.addEventListener("keydown",j),function(){window.removeEventListener("keydown",j)}},[]),Object(n.useEffect)(function(){if(h){var e="trymine"===h?"smessina":a;l(e),b.a.get("".concat("","/api/playlists?user=").concat(e)).then(function(t){if("WebapiError"!==t.data.name)return localStorage.setItem("username",e),localStorage.setItem("playlists",JSON.stringify(t.data.items)),void u(t.data.items);throw new Error}).catch(function(e){O("block"),E(!1)})}},[h]),o.length?r.a.createElement(m.a,{to:{pathname:"/playlists",username:a,playlists:o}}):r.a.createElement("div",{id:"home"},r.a.createElement(f,null),r.a.createElement("p",{className:"home-hint"},"Enter your Spotify username below",r.a.createElement("span",{className:"clickable",onClick:function(){return E("trymine")}},"(or try mine!)")),r.a.createElement("p",{className:"home-hint"},r.a.createElement("br",null),r.a.createElement("span",{style:{display:v}},"Oops!Looks like there was a problem. ",r.a.createElement("br",null),"Does ",a," exist ? ",r.a.createElement("br",null),r.a.createElement("a",{href:"https://open.spotify.com/user/".concat(a),target:"_blank",rel:"noopener noreferrer"},"Check here."))),r.a.createElement("div",{className:"btn-container"},r.a.createElement("input",{type:"text",name:"username",id:"username",value:a,onChange:function(e){return l(e.target.value)},placeholder:"Spotify username",required:!0}),r.a.createElement("button",{className:"btn btn--home",onClick:function(){return E(!0)}},"Go!")),r.a.createElement("div",{className:"bands"},r.a.createElement("p",null),r.a.createElement("p",null),r.a.createElement("p",null)))};var y=function(){var e=r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-heart"}," ",r.a.createElement("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"}," ")," ");return r.a.createElement("div",null,r.a.createElement("p",{className:"loading-text"},"Loading..."),r.a.createElement("div",{className:"placeholder"},r.a.createElement("span",null,e),r.a.createElement("span",null,e),r.a.createElement("span",null,e)))};var v=function(e){var t=Object(n.useState)(e.location.username||localStorage.getItem("username")),a=Object(i.a)(t,2),l=a[0],c=(a[1],Object(n.useState)(e.location.playlists||JSON.parse(localStorage.getItem("playlists")))),s=Object(i.a)(c,2),o=s[0],u=(s[1],Object(n.useState)("")),d=Object(i.a)(u,2),p=d[0],h=d[1],E=Object(n.useState)(!1),b=Object(i.a)(E,2),g=b[0],v=b[1];return Object(n.useEffect)(function(){var e=o;if(void 0!==e){for(var t=[],a=function(a){var n=e[a],l=a%2===0?"odd":"even";t.push(r.a.createElement("p",{key:a,className:"playlist playlist--".concat(l)},r.a.createElement("span",{className:"playlist__pointer playlist__pointer--".concat(l)}),r.a.createElement("button",{className:"playlist__link playlist__link--".concat(l),onClick:function(){return v({id:n.id,name:n.name})}},r.a.createElement("span",null,n.name))))},n=0;n<e.length;n++)a(n);h(t)}},[]),Object(n.useEffect)(function(){localStorage.setItem("chosenPlaylist",JSON.stringify(g))},[g]),g?r.a.createElement(m.a,{to:{pathname:"/songs",chosenPlaylist:g,username:l}}):p?0===p.length?r.a.createElement("div",{id:"lists"},r.a.createElement(f,{username:l}),r.a.createElement("main",null,r.a.createElement("p",{className:"error-text"},"Oops! Looks like that user doesn't have any playlists."),r.a.createElement("p",{className:"error-text"},r.a.createElement("a",{href:"/"},"Go home.")))):r.a.createElement("div",{id:"lists"},r.a.createElement(f,{username:l}),r.a.createElement("main",{id:"main"},p)):r.a.createElement("div",{id:"lists"},r.a.createElement(f,{username:l}),r.a.createElement(y,null))};var O=function(e){var t=r.a.createElement("svg",{className:"feather feather-play sc-dnqmqq jxshSx",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true"},r.a.createElement("polygon",{points:"5 3 19 12 5 21 5 3"})),a=r.a.createElement("svg",{className:"feather feather-x sc-dnqmqq jxshSx",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true"},r.a.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.a.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),l=Object(n.useState)(e.songId),c=Object(i.a)(l,2),s=c[0],o=(c[1],Object(n.useState)(e.songName)),m=Object(i.a)(o,2),u=m[0],d=(m[1],Object(n.useState)(e.messinaId)),p=Object(i.a)(d,2),h=p[0],f=(p[1],Object(n.useState)(e.songDescription)),E=Object(i.a)(f,2),g=E[0],y=E[1],v=Object(n.useState)(e.songDescription.length>0?"has-description":""),O=Object(i.a)(v,2),j=O[0],N=O[1],k=Object(n.useState)("hidden"),w=Object(i.a)(k,2),S=w[0],_=w[1],x=Object(n.useState)(!1),L=Object(i.a)(x,2),I=L[0],C=L[1],P=Object(n.useState)(t),q=Object(i.a)(P,2),H=q[0],J=q[1];return Object(n.useEffect)(function(){N(g.length>0?"has-description":"")},[g]),Object(n.useEffect)(function(){I?(document.querySelector("#embed-player").innerHTML='\n        <iframe src="https://open.spotify.com/embed/track/'.concat(s,'"\n          width="100%"\n          height="80"\n          frameborder="0"\n          allowtransparency="true"\n          allow="encrypted-media">\n        </iframe>'),J(a)):(document.querySelector("#embed-player").innerHTML="",J(t))},[I]),r.a.createElement("div",{key:s,className:"song-item song-item--".concat(S," ").concat(j)},r.a.createElement("span",{className:"song-item__name__play song-item__name__play--".concat(I),onClick:function(e){return C(!I)}},H),r.a.createElement("p",{className:"song-item__name clickable",onClick:function(e){return _("hidden"===S?"shown":"hidden")}},r.a.createElement("span",null,u)),r.a.createElement("div",{className:"song-item__description"},r.a.createElement("textarea",{type:"text",placeholder:"Write a little something about the song",onChange:function(e){return y(e.target.value)},defaultValue:g}),r.a.createElement("div",{className:"song-item__description__btn-container"},r.a.createElement("button",{className:"save-btn clickable",onClick:function(){return function(e,t){var a=[{id:e,description:t}];b.a.post("".concat("","/api/playlist"),a).then(function(e){var t=document.querySelector(".save-confirmation");t.classList.add("save-confirmation--on"),setTimeout(function(){t.classList.remove("save-confirmation--on")},3e3)}).catch(function(e){console.log(e)})}(h,g)}},"Save"),r.a.createElement("button",{className:"cancel-btn clickable",onClick:function(e){return _("hidden"===S?"shown":"hidden")}},"Close"))))};var j=function(e){var t=Object(n.useState)(e.location.username||localStorage.getItem("username")),a=Object(i.a)(t,2),l=a[0],c=(a[1],Object(n.useState)(e.location.chosenPlaylist||JSON.parse(localStorage.getItem("chosenPlaylist")))),s=Object(i.a)(c,2),o=s[0],m=(s[1],Object(n.useState)(!1)),u=Object(i.a)(m,2),d=u[0],p=u[1],h=Object(n.useState)(!1),E=Object(i.a)(h,2),g=E[0],v=E[1];return Object(n.useEffect)(function(){o?b.a.get("".concat("","/api/playlist?user=").concat(l,"&list=").concat(o.id)).then(function(e){p(e.data.items)}).catch(function(e){console.log(e)}):window.location.href="/"},[]),Object(n.useEffect)(function(){if(d){var e=d,t=[],a=!0,n=!1,l=void 0;try{for(var c,s=e[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var o=c.value;t.push(r.a.createElement(O,{key:o.id,songId:o.id,songDescription:o.description,songName:o.name,messinaId:o.messinaId}))}}catch(i){n=!0,l=i}finally{try{a||null==s.return||s.return()}finally{if(n)throw l}}t.push(r.a.createElement("div",{key:"player",id:"embed-player"})),v(t)}},[d]),g?r.a.createElement("div",{id:"songs"},r.a.createElement("div",{className:"save-confirmation"},r.a.createElement("p",{className:"big"},"Save Successful!")),r.a.createElement(f,{username:l,playlistName:o.name,playlistId:o.id}),r.a.createElement("main",{id:"main"},g)):r.a.createElement("div",{id:"songs"},r.a.createElement(f,{username:l,playlistName:o.name,playlistId:o.id}),r.a.createElement(y,null))};var N=function(){return r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(o.a,{exact:!0,path:"/",component:g}),r.a.createElement(o.a,{path:"/playlists",component:v}),r.a.createElement(o.a,{path:"/songs",component:j})))};c.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.cd63c82b.chunk.js.map